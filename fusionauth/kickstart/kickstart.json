{
  "variables": {
    "apiKey": "#{ENV.FUSIONAUTH_API_KEY}",
    "applicationId": "#{ENV.FUSIONAUTH_APPLICATION_ID}",
    "adminEmail": "admin@example.com",
    "adminPassword": "password",
    "rsaKeyId": "f0a55e7f-64de-4ffb-8be1-96602d1b91bb",
    "jwtPublicKey": "#{ENV.FUSIONAUTH_JWT_SIGNING_KEY_PUBLIC}",
    "jwtPrivateKey": "#{ENV.FUSIONAUTH_JWT_SIGNING_KEY_PRIVATE}"
  },
  "apiKeys": [
    {
      "key": "#{apiKey}",
      "description": "Dev API Key",
      "keyManager": true
    }
  ],
  "requests": [
    {
      "method": "POST",
      "url": "/api/user/registration",
      "body": {
        "user": {
          "email": "#{adminEmail}",
          "password": "#{adminPassword}",
          "data": {
            "firstName": "Admin",
            "lastName": "User"
          }
        },
        "registration": {
          "applicationId": "#{FUSIONAUTH_APPLICATION_ID}",
          "roles": [
            "admin"
          ]
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/application/#{applicationId}",
      "body": {
        "application": {
          "name": "CPF",
          "roles": [
            {
              "name": "admin"
            },
            {
              "name": "manager"
            },
            {
              "name": "user"
            }
          ],
          "loginConfiguration": {
            "requireAuthentication": false,
            "generateRefreshTokens": true,
            "allowTokenRefresh": true
          }
        }
      }
    },
    {
      "method": "PATCH",
      "url": "/api/system-configuration",
      "body": {
        "systemConfiguration": {
          "corsConfiguration": {
            "enabled": true,
            "allowedHeaders": [
              "Accept",
              "Access-Control-Request-Headers",
              "Access-Control-Request-Method",
              "Authorization",
              "Content-Type",
              "Last-Modified",
              "Origin",
              "X-FusionAuth-TenantId",
              "X-Requested-With"
            ],
            "allowedMethods": [
              "GET",
              "POST",
              "PUT",
              "OPTIONS"
            ],
            "allowedOrigins": [
              "*"
            ],
            "exposedHeaders": [
              "Access-Control-Allow-Origin",
              "Access-Control-Allow-Credentials"
            ]
          }
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/key/import/#{rsaKeyId}",
      "body": {
        "key": {
          "name": "Dev JWT Signing Key [Imported]",
          "algorithm": "RS256",
          "publicKey": "#{jwtPublicKey}",
          "privateKey": "#{jwtPrivateKey}"
        }
      }
    },
    {
      "method": "PATCH",
      "url": "/api/tenant/#{FUSIONAUTH_TENANT_ID}",
      "body": {
        "tenant": {
          "jwtConfiguration": {
            "accessTokenKeyId": "#{rsaKeyId}",
            "idTokenKeyId": "#{rsaKeyId}"
          }
        }
      }
    }
  ]
}